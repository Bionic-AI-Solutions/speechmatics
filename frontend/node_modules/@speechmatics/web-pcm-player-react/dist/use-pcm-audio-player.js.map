{"version":3,"file":"use-pcm-audio-player.js","sources":["../src/use-pcm-audio-player.ts"],"sourcesContent":["'use client';\nimport { PCMPlayer } from '@speechmatics/web-pcm-player';\nimport { useMemo, useCallback, useSyncExternalStore } from 'react';\n\nexport function usePCMAudioPlayer(audioContext: AudioContext | undefined) {\n  const player = useMemo(() => {\n    if (!audioContext) {\n      return null;\n    }\n\n    return new PCMPlayer(audioContext);\n  }, [audioContext]);\n\n  const playAudio = useCallback<PCMPlayer['playAudio']>(\n    (data) => {\n      if (!player) {\n        console.warn('Player is not ready. AudioContext not provided');\n        return;\n      }\n      return player.playAudio(data);\n    },\n    [player],\n  );\n\n  const volumePercentage = useSyncExternalStore(\n    (onChange: () => void) => {\n      player?.addEventListener('volumeChange', onChange);\n      return () => player?.removeEventListener('volumeChange', onChange);\n    },\n    () => player?.volumePercentage,\n    () => player?.volumePercentage,\n  );\n\n  const setVolumePercentage = useCallback(\n    (percentage: number) => {\n      if (player) {\n        player.volumePercentage = percentage;\n      }\n    },\n    [player],\n  );\n\n  const analyser = player?.analyser;\n\n  return { playAudio, volumePercentage, setVolumePercentage, analyser };\n}\n"],"names":[],"mappings":";;;AAIO,SAAS,kBAAkB,YAAwC,EAAA;AACxE,EAAM,MAAA,MAAA,GAAS,QAAQ,MAAM;AAC3B,IAAA,IAAI,CAAC,YAAc,EAAA;AACjB,MAAO,OAAA,IAAA,CAAA;AAAA,KACT;AAEA,IAAO,OAAA,IAAI,UAAU,YAAY,CAAA,CAAA;AAAA,GACnC,EAAG,CAAC,YAAY,CAAC,CAAA,CAAA;AAEjB,EAAA,MAAM,SAAY,GAAA,WAAA;AAAA,IAChB,CAAC,IAAS,KAAA;AACR,MAAA,IAAI,CAAC,MAAQ,EAAA;AACX,QAAA,OAAA,CAAQ,KAAK,gDAAgD,CAAA,CAAA;AAC7D,QAAA,OAAA;AAAA,OACF;AACA,MAAO,OAAA,MAAA,CAAO,UAAU,IAAI,CAAA,CAAA;AAAA,KAC9B;AAAA,IACA,CAAC,MAAM,CAAA;AAAA,GACT,CAAA;AAEA,EAAA,MAAM,gBAAmB,GAAA,oBAAA;AAAA,IACvB,CAAC,QAAyB,KAAA;AACxB,MAAQ,MAAA,EAAA,gBAAA,CAAiB,gBAAgB,QAAQ,CAAA,CAAA;AACjD,MAAA,OAAO,MAAM,MAAA,EAAQ,mBAAoB,CAAA,cAAA,EAAgB,QAAQ,CAAA,CAAA;AAAA,KACnE;AAAA,IACA,MAAM,MAAQ,EAAA,gBAAA;AAAA,IACd,MAAM,MAAQ,EAAA,gBAAA;AAAA,GAChB,CAAA;AAEA,EAAA,MAAM,mBAAsB,GAAA,WAAA;AAAA,IAC1B,CAAC,UAAuB,KAAA;AACtB,MAAA,IAAI,MAAQ,EAAA;AACV,QAAA,MAAA,CAAO,gBAAmB,GAAA,UAAA,CAAA;AAAA,OAC5B;AAAA,KACF;AAAA,IACA,CAAC,MAAM,CAAA;AAAA,GACT,CAAA;AAEA,EAAA,MAAM,WAAW,MAAQ,EAAA,QAAA,CAAA;AAEzB,EAAA,OAAO,EAAE,SAAA,EAAW,gBAAkB,EAAA,mBAAA,EAAqB,QAAS,EAAA,CAAA;AACtE;;;;"}