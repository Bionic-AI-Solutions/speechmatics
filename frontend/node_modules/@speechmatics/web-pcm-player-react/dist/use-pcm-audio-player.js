import { PCMPlayer } from '@speechmatics/web-pcm-player';
import { useMemo, useCallback, useSyncExternalStore } from 'react';

function usePCMAudioPlayer(audioContext) {
  const player = useMemo(() => {
    if (!audioContext) {
      return null;
    }
    return new PCMPlayer(audioContext);
  }, [audioContext]);
  const playAudio = useCallback(
    (data) => {
      if (!player) {
        console.warn("Player is not ready. AudioContext not provided");
        return;
      }
      return player.playAudio(data);
    },
    [player]
  );
  const volumePercentage = useSyncExternalStore(
    (onChange) => {
      player?.addEventListener("volumeChange", onChange);
      return () => player?.removeEventListener("volumeChange", onChange);
    },
    () => player?.volumePercentage,
    () => player?.volumePercentage
  );
  const setVolumePercentage = useCallback(
    (percentage) => {
      if (player) {
        player.volumePercentage = percentage;
      }
    },
    [player]
  );
  const analyser = player?.analyser;
  return { playAudio, volumePercentage, setVolumePercentage, analyser };
}

export { usePCMAudioPlayer };
//# sourceMappingURL=use-pcm-audio-player.js.map
