"use strict";
import { useFlow, useFlowEventListener } from '@speechmatics/flow-client-react';
import { useState, useMemo, useEffect } from 'react';
import { TranscriptManager } from './transcript-manager.js';

function useFlowTranscript() {
  const [transcriptGroups, setTranscriptGroups] = useState(
    []
  );
  const { sessionId } = useFlow();
  const transcriptManager = useMemo(() => new TranscriptManager(), []);
  useEffect(() => {
    if (sessionId) {
      transcriptManager.clearTranscripts();
    }
  }, [sessionId, transcriptManager]);
  useEffect(() => {
    const handleUpdate = (event) => {
      setTranscriptGroups(event.transcriptGroups);
    };
    transcriptManager.addEventListener("update", handleUpdate);
    return () => {
      transcriptManager.removeEventListener("update", handleUpdate);
    };
  }, [transcriptManager]);
  useFlowEventListener("message", ({ data }) => {
    transcriptManager.handleMessage(data);
  });
  return transcriptGroups;
}

export { useFlowTranscript };
//# sourceMappingURL=use-flow-transcript.js.map
