{"version":3,"file":"use-flow-event-listener.js","sources":["../src/use-flow-event-listener.ts"],"sourcesContent":["'use client';\nimport type { FlowClient, FlowClientEventMap } from '@speechmatics/flow-client';\nimport { useContext, useEffect } from 'react';\nimport type { TypedEventListenerOrEventListenerObject } from 'typescript-event-target';\nimport { FlowContext } from './flow-context';\n\nexport function useFlowEventListener<E extends keyof FlowClientEventMap>(\n  message: E,\n  cb: TypedEventListenerOrEventListenerObject<FlowClientEventMap, E>,\n) {\n  const context = useContext(FlowContext);\n  if (context === null) {\n    throw new Error('Flow client uninitialized in context');\n  }\n\n  return useClientEventListener(context.client, message, cb);\n}\n\nexport function useClientEventListener<K extends keyof FlowClientEventMap>(\n  client: FlowClient,\n  eventType: K,\n  cb: TypedEventListenerOrEventListenerObject<FlowClientEventMap, K>,\n) {\n  return useEffect(() => {\n    client.addEventListener(eventType, cb);\n    return () => client?.removeEventListener(eventType, cb);\n  }, [client, eventType, cb]);\n}\n"],"names":[],"mappings":";;;;;AAMgB;AAId;AACA;AACE;AAAsD;AAGxD;AACF;AAEgB;AAKd;AACE;AACA;AAAsD;AAE1D;;"}